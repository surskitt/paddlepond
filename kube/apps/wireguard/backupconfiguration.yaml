---
apiVersion: stash.appscode.com/v1beta1
kind: BackupConfiguration
metadata:
  name: wireguard
  namespace: wireguard
spec:
  repository:
    name: wireguard
  schedule: "20 3 * * *"
  target:
    ref:
      apiVersion: apps/v1
      kind: Deployment
      name: wireguard-wg-access-server
    volumeMounts:
      - name: data
        mountPath: /data
    paths:
      - /data
    exclude:
      - /data/lost+found
  retentionPolicy:
    name: 'keep-last-week'
    keepLast: 7
    prune: true
  timeOut: 5m
